import { AppDataSource } from "./data-source"
import { Product } from "./entity/Product"
import { Rating } from "./entity/Rating"
import * as fs from 'fs' 
import { EntityManager } from "typeorm"

export class Application {

    run(): void {
        this.printReport()
    }


    add


    addRating(rating: Rating) {
        AppDataSource.initialize().then(async () => {
            const ratingRepository = AppDataSource.getRepository(Rating)
            ratingRepository.save(rating)
        }).catch(error => console.log(error))
    }



    clearTables() {
        AppDataSource.initialize().then(async () => {     
            let manager: EntityManager = new EntityManager(AppDataSource)
            await manager.query('USE StoreDatabase; DELETE FROM rating; DBCC CHECKIDENT (rating, RESEED, 0)')    
        }).catch(error => console.log(error))
    }


    printReport(): void {
        console.log('[manual] application-execution-finished')
    }

}